# Maintainer: Jef Oliver (jef at eljef dot me)

_pkgname=eljef_core
pkgname=python-eljef-core
pkgver=2022.10.1
pkgrel=1
pkgdesc="Core functions for various utilities written by Jef Oliver"
arch=('aarch64' 'x86_64')
url='https://git.eljef.me/python/eljef_core'
license=('LGPL2.1')
depends=('python' 'python-colorlog' 'python-yaml' 'python-xmltodict')
makedepends=('git' 'python-build' 'python-installer' 'python-setuptools' 'python-wheel')
checkdepends=('python-pytest' 'python-pytest-cov')
source=("${_pkgname}::git+https://git.eljef.me/python/eljef_core.git")
sha512sums=('SKIP')

build() {
    cd "${_pkgname}"
    python3 -m build --wheel --no-isolation
}

check() {
    cd "${_pkgname}"
    pytest
}

package() {
    cd "${_pkgname}"
    python3 -m installer --destdir="$pkgdir" dist/*.whl
}
